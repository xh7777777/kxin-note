# 项目概述

一个基于 Electron + Vue 3 + Vite 构建的现代化桌面笔记应用，支持层级笔记管理、实时编辑和跨平台运行。

## 🚀 技术栈

### 核心框架

- **Electron**: 跨平台桌面应用框架
- **Vue 3**: 渐进式前端框架 (Composition API)
- **Vite**: 现代化构建工具
- **TypeScript**: 类型安全的JavaScript超集

### UI & 样式

- **Tailwind CSS**: 实用优先的CSS框架
- **Vue Composition API**: 现代化Vue开发方式
- **EditorJS**: 块编辑器引擎

### 开发工具

- **Jest**: 单元测试框架
- **ESLint + Prettier**: 代码规范和格式化
- **GitHub Actions**: CI/CD自动化
- **Lodash**: 实用工具库

## 📁 项目结构

```
electron-vite-template/
├── src/
│   ├── main/                    # 主进程代码
│   │   ├── hooks/              # 主进程业务逻辑
│   │   │   └── note-action-hook.ts  # 笔记操作核心逻辑
│   │   └── index.ts            # 主进程入口
│   ├── preload/                # 预加载脚本
│   │   └── index.ts            # IPC通信桥梁
│   ├── renderer/               # 渲染进程(前端)
│   │   ├── views/              # 页面组件
│   │   │   └── main-page/      # 主页面模块
│   │   │       ├── components/ # 页面组件
│   │   │       │   ├── SideBar.vue      # 侧边栏组件
│   │   │       │   ├── NoteView.vue     # 笔记视图
│   │   │       │   └── PopMessage.vue   # 消息提示组件
│   │   │       ├── hooks/      # 组合式API
│   │   │       │   ├── useNotes.ts      # 笔记管理
│   │   │       │   └── useMessage.ts    # 消息系统
│   │   │       └── MainPage.vue # 主页面入口
│   │   └── App.vue             # 应用根组件
│   ├── common/                 # 共享代码
│   │   └── models/             # 类型定义
│   │       └── note.types.ts   # 笔记相关类型
│   └── ipc/                    # IPC通信定义
├── customTypes/                # 全局类型声明
│   └── global.d.ts            # 全局API类型
├── tests/                      # 测试文件
│   └── main/                   # 主进程测试
├── assets/                     # 静态资源
│   └── notes/                  # 开发模式笔记存储
├── .github/workflows/          # CI/CD配置
└── package.json               # 项目配置
```

## 🏗️ 架构设计

### 三层架构

1. **主进程层** (`src/main/`): Node.js环境，处理文件系统、IPC通信
2. **预加载层** (`src/preload/`): 安全的IPC桥梁，暴露API给渲染进程
3. **渲染进程层** (`src/renderer/`): Vue.js应用，用户界面和交互

### 核心模块

#### 📝 笔记管理系统

- **存储策略**: JSON文件 + 索引系统
- **数据结构**: 层级笔记支持父子关系
- **CRUD操作**: 创建、读取、更新、删除、归档、垃圾桶
- **核心文件**: `src/main/hooks/note-action-hook.ts`

#### 🎨 用户界面

- **侧边栏**: 可收缩、搜索、笔记树
- **编辑器**: EditorJS块编辑器集成
- **消息系统**: 全局提示组件
- **核心文件**: `src/renderer/views/main-page/`

#### 🔄 数据流

```
用户操作 → Vue组件 → useNotes Hook → IPC调用 → 主进程Hook → 文件系统
```

## 🛠️ 开发环境设置

### 环境要求

- Node.js 20+
- npm

### 快速开始

```bash
# 克隆项目
git clone <repository-url>
cd

# 安装依赖
npm install

# 开发模式
npm run dev

# 构建应用
npm run build

# 运行测试
npm test
```

### 开发脚本

- `npm run dev`: 启动开发服务器
- `npm run build`: 构建生产版本
- `npm run test`: 运行单元测试
- `npm run lint`: 代码规范检查
- `npm run format`: 代码格式化

## 🧩 核心功能模块

### 1. 笔记管理 (`note-action-hook.ts`)

```typescript
// 核心API
createNewNote(title?, parentId?)     // 创建笔记
updateNoteFields(noteId, updates)   // 更新笔记
moveNoteToTrash(noteId)             // 移到垃圾桶
archiveNote(noteId)                 // 归档笔记
getAllNotes()                       // 获取笔记列表
```

### 2. 前端状态管理 (`useNotes.ts`)

```typescript
// 组合式API
const { notePages, activeNoteId, createNote, selectNote } = useNotes();
```

### 3. 消息系统 (`useMessage.ts`)

```typescript
// 全局提示
const { success, error, warning, info } = useMessage();
success('操作成功', '数据已保存');
```

### 4. 侧边栏组件 (`SideBar.vue`)

- 收缩/展开功能
- 笔记搜索
- 层级显示
- 快捷操作

## 🔧 数据存储

### 存储位置

- **开发模式**: `assets/notes/`
- **生产模式**: 用户数据目录

### 文件结构

```
notes/
├── notes-index.json    # 笔记索引(快速加载)
├── uuid1.json         # 笔记内容文件
└── uuid2.json         # 笔记内容文件
```

### 索引系统

- **轻量级列表**: 只包含必要字段(标题、时间、层级等)
- **按需加载**: 点击时才加载完整内容
- **自动维护**: 增删改时自动更新索引

## 🧪 测试策略

### 单元测试

- **主进程测试**: `tests/main/`
- **覆盖范围**: 笔记CRUD、索引管理、文件操作
- **Mock策略**: Electron API、文件系统、UUID生成

### 运行测试

```bash
npm test              # 运行所有测试
npm test -- --watch   # 监听模式
npm test -- --coverage # 覆盖率报告
```

## 📋 贡献指南

### 开发流程

1. **Fork项目** 到个人仓库
2. **创建分支** `git checkout -b feature/your-feature`
3. **遵循规范** 使用ESLint和Prettier
4. **编写测试** 为新功能添加测试
5. **提交代码** 使用清晰的commit message
6. **创建PR** 详细描述变更内容

### 代码规范

- **TypeScript**: 使用严格类型检查
- **Vue3 Composition API**: 优先使用组合式API
- **函数式编程**: 避免类，优先使用函数
- **命名规范**: camelCase，组件使用PascalCase
- **注释**: 为公共API添加JSDoc注释

### 提交规范

```bash
feat: 添加新功能
fix: 修复bug
docs: 更新文档
style: 代码格式调整
refactor: 代码重构
test: 测试相关
chore: 构建/工具相关
```

## 🎯 贡献机会

### 新手友好

- 📝 文档完善和翻译
- 🎨 UI/UX改进
- 🐛 Bug修复
- ✅ 测试用例补充

### 进阶功能

- 🔍 搜索功能增强
- 🌙 暗色主题
- 📊 数据导入/导出
- 🔌 插件系统
- 📱 移动端适配

### 性能优化

- ⚡ 虚拟滚动
- 💾 缓存策略
- 🚀 构建优化
- 📦 包体积优化

## 📞 联系方式

- **Issues**: 提交Bug报告和功能建议
- **Discussions**: 技术讨论和问题求助
- **PR Review**: 积极参与代码审查

## 📄 许可证

本项目采用 [MIT许可证](../LICENSE)，欢迎自由使用和贡献。

---

**开始贡献前，建议先阅读现有代码，理解项目架构，然后从小的改进开始！** 🚀
